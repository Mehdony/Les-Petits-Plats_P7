const updateAppliancesTags = () => {
    appliancesTags = [];
    filteredRecipes.forEach((recipe) => {
      if (!appliancesTags.includes(recipe.appliance.toLowerCase())) {
        appliancesTags.push(recipe.appliance.toLowerCase());
      }
    });
  
    appliancesTags = appliancesTags.filter((appliance) => {
      return !selectedTags.some((tag) => tag.value === appliance);
    });
  
    const appliancesContainer = document.querySelector("#appliance-tags");
    const appliancesList = document.createElement("ul");
  
    appliancesList.classList.add("tags-ul-appliance");
  
    const ul = appliancesContainer.querySelector(".tags-ul-appliance");
    if (ul) {
      ul.remove();
    }
  
    appliancesContainer.appendChild(appliancesList);  
    appliancesTags.forEach((appliance) => {
      appliancesList.innerHTML += `<li class="appliance-tag">${appliance}</li>`;
    });
  
    document.querySelectorAll(".appliance-tag").forEach((tag) => {
      tag.addEventListener("click", (e) => {
        if (!selectedTags.includes(tag.innerHTML)) {
          e.preventDefault();
          selectedTags.push({
            type: "appliance",
            value: tag.innerHTML,
          });
  
          searchByTags();
        }
      });
    });
    // createTag();
  
    console.log(appliancesTags);
  };
  
  
  const updateUstensilsTags = () => {
    ustensilsTags = [];
    filteredRecipes.forEach((recipe) => {
      recipe.ustensils.forEach((ustensil) => {
        if (!ustensilsTags.includes(ustensil.toLowerCase())) {
          ustensilsTags.push(ustensil.toLowerCase());
        }
      });
    });
  
    ustensilsTags = ustensilsTags.filter((ustensil) => {
      return !selectedTags.some((tag) => tag.value === ustensil);
    });
  
    const ustensilsContainer = document.querySelector("#ustensil-tags");
    const ustensilsList = document.createElement("ul");
    ustensilsList.classList.add("tags-ul-ustensil");
  
    const ul = ustensilsContainer.querySelector(".tags-ul-unstensil");
    if (ul) {
      ul.remove();
    }
  
    ustensilsContainer.appendChild(ustensilsList);
    ustensilsTags.forEach((ustensil) => {
      ustensilsList.innerHTML += `<li class="ustensil-tag">${ustensil}</li>`;
    });
  
    document.querySelectorAll(".ustensil-tag").forEach((tag) => {
      tag.addEventListener("click", (e) => {
        if (!selectedTags.includes(tag.innerHTML)) {
          e.preventDefault();
          selectedTags.push({
            type: "ustensil",
            value: tag.innerHTML,
          });
  
          searchByTags();
        }
      });
    });
    // createTag();
  
    console.log(ustensilsTags);
  }
  

  const updateIngredientsTags = () => {
    // on crée un tableau qui va contenir la liste des ingrédients des recettes ( filtrées ou non )
    ingredientsTags = [];
    const inputContainer = document.querySelector(".ingredients_input");
    let searchKey = inputContainer.value;
    // pour chaque recette
    filteredRecipes.forEach((recipe) => {
      // on boucle sur les ingrédients de la recette
      recipe.ingredients.forEach((ingredient) => {
        // on vérifie si l'ingrédient n'est pas déjà dans le tableau
        if (!ingredientsTags.includes(ingredient.ingredient.toLowerCase())) {
          // si il n'est pas dans le tableau on l'ajoute
            if (ingredient.ingredient.toLowerCase().includes(searchKey.toLowerCase())){
              ingredientsTags.push(ingredient.ingredient.toLowerCase());
            }
        }
      });
    });
  
    ingredientsTags = ingredientsTags.filter((ingredient) => {
      return !selectedTags.some((tag) => tag.value === ingredient);
    });
  
    // on récupère le container qui va contenir l'ul
    const ingredientsContainer = document.querySelector("#ingredient-tags");
    // on crée l'ul qui va contenir les li
    const ingredientsList = document.createElement("ul");
    ingredientsList.classList.add("tags-ul");
  
    const ul = ingredientsContainer.querySelector(".tags-ul");
    if (ul) {
      ul.remove();
    }
  
    ingredientsContainer.appendChild(ingredientsList);
    ingredientsTags.forEach((ingredient) => {
      ingredientsList.innerHTML += `<li class="ingredient-tag">${ingredient}</li>`;
    });
  
    // pour chacuns des tags on ajoute un event listener
    document.querySelectorAll(".ingredient-tag").forEach((tag) => {
      tag.addEventListener("click", (e) => {
        // au click sur le tag si il n'est pas dans selectedTags on l'ajoute ( le tag sur lequel on a cliqué )
        if (!selectedTags.includes(tag.innerHTML)) {
          e.preventDefault();
          // on push dans selectedTags un objet avec le type et la valeur du tag
          selectedTags.push({
            type: "ingredient",
            value: tag.innerHTML,
          });
          searchByTags();
        }
      });
    });
    createTag();
  
    console.log(ingredientsTags);
  };
  